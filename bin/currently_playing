#!/usr/bin/env python
# -*- coding: utf8 -*-
import dbus

# Hack
import subprocess
import os
addr = subprocess.check_output(os.path.expanduser("~/bin/dbus_address"), shell=True).strip()
os.environ['DBUS_SESSION_BUS_ADDRESS'] = addr

bus = dbus.SessionBus()
player = bus.get_object('org.mpris.MediaPlayer2.spotify', '/org/mpris/MediaPlayer2')
iface = dbus.Interface(player, 'org.freedesktop.DBus.Properties')
info = iface.Get('org.mpris.MediaPlayer2.Player', 'Metadata')

other = iface.Get('org.mpris.MediaPlayer2.Player', 'PlaybackStatus')
print '>>>>>>', other

if not info:
    print ''
else:
    print u'{artist} - {title}'.format(artist=info['xesam:artist'][0], title=info['xesam:title'])
